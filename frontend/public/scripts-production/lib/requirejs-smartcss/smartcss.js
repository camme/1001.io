define(["text"],function(e){function t(e){console.log(e)}function n(e,t){for(var n=(name.indexOf("?")>-1?"&":"?")+t.urlArgs,r=/url\(("|'|)(.*?)("|'|)\)/gi,s=r.exec(e);s;){var n=(s[2].indexOf("?")>-1?"&":"?")+t.urlArgs;e=e.replace(s[2],s[2]+n),s=r.exec(e)}return e}function r(e){var t=e;return t=t.replace(/\r\n/g," "),t=t.replace(/[\n\r]/g," "),t=t.replace(/'/g,'"')}function s(e,t){var n=o(),r=l(e),s=document.createElement("style");s.setAttribute("id",r),s.setAttribute("data-module","smartcss"),s.innerHTML=t+"\n /*@ sourceURL="+e+" */",n.appendChild(s)}function a(e){var t=l(e),n=document.getElementById(t);n&&n.parentNode.removeChild(n)}function i(e,t,n){function r(){try{u.sheet&&u.sheet.cssRules.length>0?a=!0:u.styleSheet&&u.styleSheet.cssText.length>0?a=!0:u.innerHTML&&u.innerHTML.length>0&&(a=!0)}catch(e){}a===!0?n(u):setTimeout(r,20)}var s=e;t.baseUrl&&"./"!=t.baseUrl&&(s=t.baseUrl+e);var a=!1,i=o(),c=l(e),u=document.createElement("link");u.setAttribute("id",c),u.setAttribute("rel","stylesheet"),u.setAttribute("href",s),u.setAttribute("type","text/css"),u.setAttribute("data-module","smartcss"),u.addEventListener("load",function(){a===!1&&(a=!0,n(u))},!1),u.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&a===!1&&(a=!0,n(u))},u.onload=function(){a===!1&&(a=!0,n(u))},i.appendChild(u),r()}function c(r,c,u,o){if(o.isBuild){var l=require.nodeRequire("fs");require.nodeRequire("path"),console.log(r);var d=r.indexOf("!")>-1;d&&(r=r.substring(1));var m=c.toUrl(r),g=l.readFileSync(m,"utf8");if(o.smartcss&&o.smartcss.urlArgs){var v=o.smartcss.urlArgs;"function"==typeof o.smartcss.urlArgs&&(v=o.smartcss.urlArgs()),g=n(g,{urlArgs:v})}g=g+"\n /*@ sourceURL="+r+" */",f[r]={content:g,dontRender:d},u()}else!function(r,c,u,o){if(o&&o.smartcss&&o.smartcss.inject===!0||o&&o.urlArgs){var l=r.indexOf("!")>-1;l&&(r=r.substring(1));var d=c.toUrl(r);o.urlArgs,e.get(d,function(e){o.urlArgs&&(e=n(e,o)),f[r]=e,l||s(r,e),u({render:function(){s(r,e)},remove:function(){a(r)}})},t)}else i(r,o,function(){u(r)})}(r,c,u,o)}function u(e,t){a(e),t()}function o(){return document.getElementsByTagName("head")[0]}function l(e){var t=e.replace(/[\/\.]/gi,"-").toLowerCase(),n="smartcss-";return n+t}function d(e,t,n){if(t in f){var s=f[t].content;s=r(s),f[t].dontRender?n("define('"+e+"!!"+t+"', ['"+e+"'], function (smartcss) { return { render: function() { smartcss.addStyle('"+t+"', '"+s+"'); } }});\n"):n("define('"+e+"!"+t+"', ['"+e+"'], function (smartcss) { smartcss.addStyle('"+t+"', '"+s+"');});\n")}}var f={};return{load:c,unload:u,getHead:o,add:i,addStyle:s,getId:l,write:d,escapeContent:r}});